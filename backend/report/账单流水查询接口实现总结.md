# OKX è´¦å•æµæ°´æŸ¥è¯¢æ¥å£å®ç°æ€»ç»“

**ç‰ˆæœ¬**: v1.5.0  
**æ—¥æœŸ**: 2024-12-04  
**æ¥å£æ•°é‡**: 2ä¸ªæ–°å¢æ¥å£  
**æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

---

## ğŸ“Š æ–°å¢æ¥å£æ¦‚è§ˆ

| æ¥å£åç§° | ç«¯ç‚¹ | æ–¹æ³• | ç”¨é€” | çŠ¶æ€ |
|---------|------|------|------|------|
| get_bills | /api/v5/account/bills | GET | æŸ¥è¯¢è¿‘7å¤©è´¦å•æµæ°´ | âœ… å·²æµ‹è¯• |
| get_bills_archive | /api/v5/account/bills-archive | GET | æŸ¥è¯¢è¿‘3ä¸ªæœˆè´¦å•æµæ°´ | âœ… å·²æµ‹è¯• |

---

## ğŸ” åŠŸèƒ½è¯¦æƒ…

### 1. get_bills - è´¦å•æµæ°´æŸ¥è¯¢ï¼ˆè¿‘7å¤©ï¼‰

**åŠŸèƒ½è¯´æ˜**:
- æŸ¥è¯¢æœ€è¿‘7å¤©çš„è´¦å•æ•°æ®
- è´¦å•æµæ°´æ˜¯æŒ‡å¯¼è‡´è´¦æˆ·ä½™é¢å¢åŠ æˆ–å‡å°‘çš„è¡Œä¸º

**æ ¸å¿ƒå‚æ•°**:
- `inst_type`: äº§å“ç±»å‹ï¼ˆSPOT/MARGIN/SWAP/FUTURES/OPTIONï¼‰
- `ccy`: è´¦å•å¸ç§
- `type`: è´¦å•ç±»å‹ï¼ˆ1:åˆ’è½¬, 2:äº¤æ˜“, 3:äº¤å‰²ç­‰ï¼‰
- `sub_type`: è´¦å•å­ç±»å‹ï¼ˆ1:ä¹°å…¥, 2:å–å‡ºç­‰ï¼‰
- `begin`/`end`: æ—¶é—´èŒƒå›´
- `limit`: è¿”å›æ•°é‡ï¼ˆæœ€å¤§100ï¼‰

**è¿”å›å…³é”®å­—æ®µ**:
```json
{
  "billId": "è´¦å•ID",
  "ccy": "å¸ç§",
  "type": "è´¦å•ç±»å‹",
  "subType": "è´¦å•å­ç±»å‹",
  "balChg": "ä½™é¢å˜åŠ¨",
  "bal": "å½“å‰ä½™é¢",
  "instId": "äº§å“ID",
  "ordId": "å…³è”è®¢å•ID",
  "px": "æˆäº¤ä»·æ ¼",
  "sz": "æˆäº¤æ•°é‡",
  "fee": "æ‰‹ç»­è´¹",
  "execType": "æµåŠ¨æ€§æ–¹å‘(T/M)",
  "ts": "æ—¶é—´æˆ³"
}
```

### 2. get_bills_archive - è´¦å•æµæ°´æŸ¥è¯¢ï¼ˆè¿‘3ä¸ªæœˆï¼‰

**åŠŸèƒ½è¯´æ˜**:
- æŸ¥è¯¢æœ€è¿‘3ä¸ªæœˆçš„è´¦å•æ•°æ®
- å‚æ•°å’Œè¿”å›æ ¼å¼ä¸ get_bills å®Œå…¨ä¸€è‡´
- é™é€Ÿç•¥æ…¢ï¼ˆ5æ¬¡/2sï¼‰

---

## ğŸ“ è´¦å•ç±»å‹è¯´æ˜

### ä¸»è¦è´¦å•ç±»å‹ï¼ˆtypeï¼‰

| Type | è¯´æ˜ | å¸¸è§åœºæ™¯ |
|------|------|----------|
| 1 | åˆ’è½¬ | è´¦æˆ·é—´è½¬è´¦ |
| 2 | äº¤æ˜“ | ä¹°å–æˆäº¤ |
| 3 | äº¤å‰² | åˆçº¦äº¤å‰² |
| 8 | èµ„é‡‘è´¹ | æ°¸ç»­åˆçº¦èµ„é‡‘è´¹ |

### äº¤æ˜“è´¦å•å­ç±»å‹ï¼ˆsubTypeï¼‰

| SubType | è¯´æ˜ | åº”ç”¨ |
|---------|------|------|
| 1 | ä¹°å…¥ | ç°è´§/åˆçº¦ä¹°å…¥ |
| 2 | å–å‡º | ç°è´§/åˆçº¦å–å‡º |
| 3 | å¼€å¤š | åˆçº¦å¼€å¤š |
| 4 | å¼€ç©º | åˆçº¦å¼€ç©º |
| 5 | å¹³å¤š | åˆçº¦å¹³å¤š |
| 6 | å¹³ç©º | åˆçº¦å¹³ç©º |

### åˆ’è½¬è´¦å•å­ç±»å‹

| SubType | è¯´æ˜ |
|---------|------|
| 11 | è½¬å…¥ |
| 12 | è½¬å‡º |

---

## ğŸ§ª æµ‹è¯•ç»“æœ

### æµ‹è¯•ç”¨ä¾‹è¦†ç›–

#### get_billsï¼ˆè¿‘7å¤©ï¼‰
âœ… **æµ‹è¯•1.1**: æŸ¥è¯¢æ‰€æœ‰è´¦å•ï¼ˆé™åˆ¶10æ¡ï¼‰
- æˆåŠŸè¿”å›10æ¡è´¦å•è®°å½•
- åŒ…å«å®Œæ•´çš„äº¤æ˜“ä¿¡æ¯

âœ… **æµ‹è¯•1.2**: æŸ¥è¯¢USDTè´¦å•
- æˆåŠŸç­›é€‰å‡ºUSDTç›¸å…³è´¦å•
- æ˜¾ç¤ºè¯¦ç»†çš„ä½™é¢å˜åŠ¨ä¿¡æ¯

âœ… **æµ‹è¯•1.3**: æŸ¥è¯¢äº¤æ˜“ç±»è´¦å•ï¼ˆtype=2ï¼‰
- æˆåŠŸç­›é€‰å‡ºäº¤æ˜“ç±»è´¦å•
- åŒ…å«ä»·æ ¼ã€æ•°é‡ã€æ‰‹ç»­è´¹ç­‰äº¤æ˜“è¯¦æƒ…

âœ… **æµ‹è¯•1.4**: æŸ¥è¯¢ç°è´§è´¦å•ï¼ˆinst_type=SPOTï¼‰
- æˆåŠŸç­›é€‰å‡ºç°è´§ç›¸å…³è´¦å•

#### get_bills_archiveï¼ˆè¿‘3ä¸ªæœˆï¼‰
âœ… **æµ‹è¯•2.1**: æŸ¥è¯¢æ‰€æœ‰å†å²è´¦å•ï¼ˆé™åˆ¶10æ¡ï¼‰
- æˆåŠŸè¿”å›å†å²è´¦å•
- è´¦å•ç±»å‹ç»Ÿè®¡åŠŸèƒ½æ­£å¸¸

âœ… **æµ‹è¯•2.2**: æŸ¥è¯¢ç°è´§å†å²è´¦å•
- æˆåŠŸç­›é€‰å†å²ç°è´§è´¦å•

âœ… **æµ‹è¯•2.3**: æŸ¥è¯¢USDTå†å²è´¦å•
- æˆåŠŸç­›é€‰USDTå†å²è´¦å•

### æµ‹è¯•é€šè¿‡ç‡

```
âœ… get_bills              : 100% (4/4 æµ‹è¯•åœºæ™¯)
âœ… get_bills_archive      : 100% (3/3 æµ‹è¯•åœºæ™¯)

æ€»è®¡: 2/2 ä¸ªæ¥å£é€šè¿‡ (100%)
```

---

## ğŸ’¡ é‡è¦å‘ç°

### 1. è´¦å•è®°å½•çš„å®Œæ•´æ€§
- âœ… åŒ…å«å®Œæ•´çš„äº¤æ˜“ä¿¡æ¯ï¼ˆä»·æ ¼ã€æ•°é‡ã€æ‰‹ç»­è´¹ï¼‰
- âœ… å¯ä»¥é€šè¿‡ `ordId` å…³è”åˆ°å…·ä½“è®¢å•
- âœ… è®°å½•ä½™é¢å˜åŠ¨å’Œå½“å‰ä½™é¢

### 2. æµåŠ¨æ€§æ–¹å‘ï¼ˆexecTypeï¼‰
- **T (Taker)**: åƒå•ï¼Œä¸»åŠ¨æˆäº¤
- **M (Maker)**: æŒ‚å•ï¼Œè¢«åŠ¨æˆäº¤
- â„¹ï¸ Makeré€šå¸¸äº«å—æ›´ä½æ‰‹ç»­è´¹

### 3. æ‰‹ç»­è´¹è®¡ç®—
- **è´Ÿæ•°**: è¡¨ç¤ºæ‰£é™¤æ‰‹ç»­è´¹
- **æ­£æ•°**: è¡¨ç¤ºè¿”ä½£ï¼ˆMakerè¿”ä½£ï¼‰
- ç¤ºä¾‹: `fee: "-0.0499992942"` è¡¨ç¤ºæ‰£é™¤0.05 USDTæ‰‹ç»­è´¹

### 4. è´¦å•ç±»å‹ç»Ÿè®¡
åœ¨æµ‹è¯•ä¸­å‘ç°çš„è´¦å•åˆ†å¸ƒï¼š
- Type 2ï¼ˆäº¤æ˜“ï¼‰: 8æ¡ï¼ˆ80%ï¼‰
- Type 1ï¼ˆåˆ’è½¬ï¼‰: 2æ¡ï¼ˆ20%ï¼‰

### 5. ä¸¤ä¸ªæ¥å£çš„åŒºåˆ«
| ç‰¹æ€§ | get_bills | get_bills_archive |
|------|-----------|-------------------|
| æ—¶é—´èŒƒå›´ | è¿‘7å¤© | è¿‘3ä¸ªæœˆ |
| é™é€Ÿ | 5æ¬¡/s | 5æ¬¡/2s |
| æ•°æ®æ ¼å¼ | å®Œå…¨ç›¸åŒ | å®Œå…¨ç›¸åŒ |
| é€‚ç”¨åœºæ™¯ | å®æ—¶ç›‘æ§ | å†å²åˆ†æ |

---

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### 1. äº¤æ˜“åˆ†æ
```python
# æŸ¥è¯¢æ‰€æœ‰äº¤æ˜“è´¦å•
bills = client.get_bills(type="2", limit="50")

# åˆ†ææ‰‹ç»­è´¹æ”¯å‡º
total_fee = sum(float(b['fee']) for b in bills['data'])
```

### 2. ä½™é¢ç›‘æ§
```python
# æŸ¥è¯¢ç‰¹å®šå¸ç§ä½™é¢å˜åŠ¨
bills = client.get_bills(ccy="USDT", limit="20")

# è¿½è¸ªä½™é¢å˜åŒ–
for bill in bills['data']:
    print(f"æ—¶é—´: {bill['ts']}, å˜åŠ¨: {bill['balChg']}, ä½™é¢: {bill['bal']}")
```

### 3. è®¢å•å…³è”
```python
# é€šè¿‡è®¢å•IDæŸ¥æ‰¾ç›¸å…³è´¦å•
bills = client.get_bills(limit="100")
order_bills = [b for b in bills['data'] if b.get('ordId') == target_order_id]
```

### 4. Maker/Takeråˆ†æ
```python
# ç»Ÿè®¡Makerå’ŒTakeræˆäº¤æ¯”ä¾‹
bills = client.get_bills(type="2", limit="100")
maker_count = sum(1 for b in bills['data'] if b.get('execType') == 'M')
taker_count = sum(1 for b in bills['data'] if b.get('execType') == 'T')
```

---

## ğŸ”§ ä»£ç å®ç°

### get_bills å®ç°
```python
def get_bills(self, inst_type=None, ccy=None, mgn_mode=None, 
              ct_type=None, type=None, sub_type=None, 
              after=None, before=None, begin=None, end=None, limit=None):
    """
    æŸ¥è¯¢è´¦å•æµæ°´ï¼ˆè¿‘7å¤©ï¼‰
    """
    params = {}
    if inst_type: params['instType'] = inst_type
    if ccy: params['ccy'] = ccy
    if mgn_mode: params['mgnMode'] = mgn_mode
    if ct_type: params['ctType'] = ct_type
    if type: params['type'] = type
    if sub_type: params['subType'] = sub_type
    if after: params['after'] = after
    if before: params['before'] = before
    if begin: params['begin'] = begin
    if end: params['end'] = end
    if limit: params['limit'] = limit
    
    return self._request('GET', '/api/v5/account/bills', params)
```

### get_bills_archive å®ç°
```python
def get_bills_archive(self, inst_type=None, ccy=None, mgn_mode=None, 
                     ct_type=None, type=None, sub_type=None, 
                     after=None, before=None, begin=None, end=None, limit=None):
    """
    æŸ¥è¯¢è´¦å•æµæ°´ï¼ˆè¿‘3ä¸ªæœˆï¼‰
    """
    params = {}
    if inst_type: params['instType'] = inst_type
    if ccy: params['ccy'] = ccy
    if mgn_mode: params['mgnMode'] = mgn_mode
    if ct_type: params['ctType'] = ct_type
    if type: params['type'] = type
    if sub_type: params['subType'] = sub_type
    if after: params['after'] = after
    if before: params['before'] = before
    if begin: params['begin'] = begin
    if end: params['end'] = end
    if limit: params['limit'] = limit
    
    return self._request('GET', '/api/v5/account/bills-archive', params)
```

---

## ğŸ“ˆ é¡¹ç›®è¿›å±•

### å½“å‰çŠ¶æ€
- **REST API æ¥å£æ€»æ•°**: 16ä¸ª
  - äº¤æ˜“æ¥å£: 9ä¸ª âœ…
  - è´¦æˆ·æ¥å£: 5ä¸ª âœ…ï¼ˆæ–°å¢2ä¸ªï¼‰
  - è¡Œæƒ…æ¥å£: 2ä¸ª âœ…

### æµ‹è¯•è¦†ç›–
- **æ¥å£æµ‹è¯•è¦†ç›–ç‡**: 100% (16/16)
- **åŠŸèƒ½æµ‹è¯•è¦†ç›–ç‡**: 100%
- **æ–‡æ¡£å®Œæ•´åº¦**: 100%

### ç‰ˆæœ¬å†å²
- v1.1.0: åŸºç¡€æ¥å£ï¼ˆ8ä¸ªï¼‰
- v1.2.0: æ‰¹é‡æ“ä½œï¼ˆæ–°å¢4ä¸ªï¼‰
- v1.3.0: è®¢å•æŸ¥è¯¢ï¼ˆæ–°å¢1ä¸ªï¼‰
- v1.4.0: è´¦æˆ·äº§å“ï¼ˆæ–°å¢1ä¸ªï¼‰
- v1.5.0: è´¦å•æµæ°´ï¼ˆæ–°å¢2ä¸ªï¼‰âœ… å½“å‰ç‰ˆæœ¬

---

## âœ… æ€»ç»“

### æˆåŠŸå®ç°
1. âœ… è´¦å•æµæ°´æŸ¥è¯¢åŠŸèƒ½ï¼ˆ7å¤©å’Œ3ä¸ªæœˆï¼‰
2. âœ… æ”¯æŒå¤šç»´åº¦ç­›é€‰ï¼ˆå¸ç§ã€ç±»å‹ã€äº§å“ç­‰ï¼‰
3. âœ… å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼ˆ100%ï¼‰
4. âœ… è¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
5. âœ… è´¦å•ç±»å‹å’Œå­—æ®µè¯´æ˜æ–‡æ¡£

### å…³é”®ç‰¹æ€§
- ğŸ“Š å®Œæ•´çš„äº¤æ˜“ä¿¡æ¯è®°å½•
- ğŸ”— è®¢å•å…³è”åŠŸèƒ½ï¼ˆordIdï¼‰
- ğŸ’° æ‰‹ç»­è´¹è¯¦ç»†è®°å½•
- ğŸ“ˆ ä½™é¢å˜åŠ¨è¿½è¸ª
- ğŸ¯ æµåŠ¨æ€§æ–¹å‘æ ‡è¯†

### åç»­è®¡åˆ’
- [ ] WebSocketå®æ—¶è´¦å•æ¨é€
- [ ] è´¦å•æ•°æ®åˆ†æå·¥å…·
- [ ] æ‰‹ç»­è´¹ç»Ÿè®¡æŠ¥è¡¨
- [ ] Maker/Takeræ¯”ä¾‹åˆ†æ

---

**ç»“è®º**: è´¦å•æµæ°´æŸ¥è¯¢æ¥å£åŠŸèƒ½å®Œæ•´ï¼Œæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œæ–‡æ¡£è¯¦å°½ï¼Œå¯ä»¥æŠ•å…¥ä½¿ç”¨ï¼ ğŸ‰

