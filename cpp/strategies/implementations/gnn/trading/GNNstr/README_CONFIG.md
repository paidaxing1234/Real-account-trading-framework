# GNNç­–ç•¥ - é…ç½®æ–‡ä»¶ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

`gnn_strategy_config.py` æ˜¯ä¸€ä¸ªä»JSONé…ç½®æ–‡ä»¶è¯»å–å‚æ•°çš„GNNäº¤æ˜“ç­–ç•¥ï¼Œä»Redisæ•°æ®åº“è¯»å–å†å²Kçº¿æ•°æ®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘é…ç½®æ–‡ä»¶ `/home/xyc/Real-account-trading-framework-main/Real-account-trading-framework-main/cpp/strategies/configs/gnn_multi_coin.json`ï¼š

```json
{
  "strategy_id": "gnn_multi_coin",
  "strategy_name": "GNNå¤šå¸ç§é¢„æµ‹ç­–ç•¥",
  "enabled": true,

  "exchange": "okx",  // æˆ– "binance"
  "api_key": "ä½ çš„API-Key",
  "secret_key": "ä½ çš„Secret-Key",
  "passphrase": "ä½ çš„Passphrase",  // ä»…OKXéœ€è¦
  "is_testnet": true,  // true=æ¨¡æ‹Ÿç›˜, false=å®ç›˜

  "params": {
    "n_layers": 20,              // åˆ†å±‚æ•°é‡ï¼ˆ20å±‚=5%é€‰å¸ç‡ï¼‰
    "position_size_usdt": 500,   // æ¯ä¸ªå¸ç§çš„ä»“ä½é‡‘é¢
    "history_bars": 1200,        // å†å²Kçº¿æ•°é‡
    "interval": "1m",            // Kçº¿å‘¨æœŸ
    "schedule_interval": "10m",  // æ‰§è¡Œé—´éš”
    "schedule_time": "now",      // é¦–æ¬¡æ‰§è¡Œæ—¶é—´
    "redis_host": "127.0.0.1",   // Redisåœ°å€
    "redis_port": 6379,          // Redisç«¯å£
    "redis_password": ""         // Rediså¯†ç ï¼ˆå¦‚æœ‰ï¼‰
  }
}
```

### 2. è¿è¡Œç­–ç•¥

```bash
cd /home/xyc/Real-account-trading-framework-main/Real-account-trading-framework-main/cpp/strategies/GNN_model/trading/GNNstr

# è¿è¡Œç­–ç•¥
python3 gnn_strategy_config.py --config ../../../../configs/gnn_multi_coin.json
```

## ğŸ“Š é…ç½®å‚æ•°è¯´æ˜

### åŸºç¡€é…ç½®

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `strategy_id` | ç­–ç•¥å”¯ä¸€æ ‡è¯† | `"gnn_multi_coin"` |
| `strategy_name` | ç­–ç•¥åç§° | `"GNNå¤šå¸ç§é¢„æµ‹ç­–ç•¥"` |
| `enabled` | æ˜¯å¦å¯ç”¨ | `true` |
| `exchange` | äº¤æ˜“æ‰€ | `"okx"` æˆ– `"binance"` |
| `is_testnet` | æ˜¯å¦æ¨¡æ‹Ÿç›˜ | `true` |

### APIå¯†é’¥é…ç½®

**OKX:**
```json
"api_key": "ä½ çš„OKX-API-Key",
"secret_key": "ä½ çš„OKX-Secret-Key",
"passphrase": "ä½ çš„OKX-Passphrase"
```

**Binance:**
```json
"api_key": "ä½ çš„Binance-API-Key",
"secret_key": "ä½ çš„Binance-Secret-Key"
```

### ç­–ç•¥å‚æ•° (params)

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | æ¨èå€¼ |
|------|------|--------|--------|
| `n_layers` | åˆ†å±‚æ•°é‡ | 20 | 20ï¼ˆ5%é€‰å¸ç‡ï¼‰ |
| `position_size_usdt` | å•å¸ç§ä»“ä½ | 500 | 500-1000ï¼ˆæµ‹è¯•ï¼‰ |
| `history_bars` | å†å²Kçº¿æ•°é‡ | 1200 | 1200 |
| `interval` | Kçº¿å‘¨æœŸ | `"1m"` | `"1m"` |
| `schedule_interval` | æ‰§è¡Œé—´éš” | `"10m"` | `"10m"` æˆ– `"1h"` |
| `schedule_time` | é¦–æ¬¡æ‰§è¡Œæ—¶é—´ | `"now"` | `"now"` æˆ– `"00:00"` |
| `redis_host` | Redisåœ°å€ | `"127.0.0.1"` | `"127.0.0.1"` |
| `redis_port` | Redisç«¯å£ | 6379 | 6379 |

### é£æ§é…ç½® (risk_control)

```json
"risk_control": {
  "enabled": true,
  "max_position_value": 50000,    // æœ€å¤§æŒä»“é‡‘é¢ï¼ˆUSDTï¼‰
  "max_daily_loss": 5000,         // æœ€å¤§æ—¥äºæŸï¼ˆUSDTï¼‰
  "max_order_amount": 1000,       // å•ç¬”è®¢å•é™é¢ï¼ˆUSDTï¼‰
  "max_orders_per_minute": 10     // æ¯åˆ†é’Ÿæœ€å¤§è®¢å•æ•°
}
```

### è”ç³»äººé…ç½® (contacts)

```json
"contacts": [
  {
    "name": "å¼ ä¸‰",
    "phone": "+86-138-0000-0001",
    "email": "zhangsan@example.com",
    "wechat": "zhangsan_wx",
    "department": "é‡åŒ–äº¤æ˜“éƒ¨",
    "role": "ç­–ç•¥è´Ÿè´£äºº"
  }
]
```

## ğŸ”§ å¸ç§æ± é…ç½®

### æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤å¸ç§æ± æ–‡ä»¶

ç­–ç•¥ä¼šè‡ªåŠ¨æ ¹æ®äº¤æ˜“æ‰€é€‰æ‹©ï¼š
- OKX: `currency_pool_okx.txt`
- Binance: `currency_pool_binance.txt`

### æ–¹å¼2ï¼šåœ¨é…ç½®ä¸­æŒ‡å®šå¸ç§

```json
"params": {
  "symbols": ["BTC-USDT-SWAP", "ETH-USDT-SWAP", "SOL-USDT-SWAP"]
}
```

### æ–¹å¼3ï¼šæŒ‡å®šè‡ªå®šä¹‰å¸ç§æ± æ–‡ä»¶

```json
"params": {
  "currency_pool_file": "/path/to/your/currency_pool.txt"
}
```

## ğŸ“ˆ è¿è¡Œç¤ºä¾‹

### ç¤ºä¾‹1ï¼šOKXæ¨¡æ‹Ÿç›˜ï¼Œæ¯10åˆ†é’Ÿæ‰§è¡Œ

```bash
python3 gnn_strategy_config.py --config ../../../../configs/gnn_multi_coin.json
```

è¾“å‡ºï¼š
```
============================================================
  GNNå¤šå¸ç§é¢„æµ‹ç­–ç•¥
============================================================

ç­–ç•¥ID: gnn_multi_coin
äº¤æ˜“æ‰€: okx (æ¨¡æ‹Ÿç›˜)
Redis: 127.0.0.1:6379
å¸ç§æ•°é‡: 260
åˆ†å±‚æ•°é‡: 20
ä»“ä½é‡‘é¢: 500 USDT
å®šæ—¶æ‰§è¡Œ: æ¯10m now

è”ç³»äºº:
  - å­™ä¸ƒ (ç­–ç•¥è´Ÿè´£äºº)
    ç”µè¯: +86-137-0000-0005, å¾®ä¿¡: sunqi_wx

é£æ§è®¾ç½®:
  æœ€å¤§æŒä»“: 50000 USDT
  æœ€å¤§æ—¥äºæŸ: 5000 USDT
  å•ç¬”é™é¢: 1000 USDT

------------------------------------------------------------
[åˆå§‹åŒ–] è¿æ¥Redis...
[åˆå§‹åŒ–] åŠ è½½GNNæ¨¡å‹...
[åˆå§‹åŒ–] GNNæ¨¡å‹åŠ è½½æˆåŠŸ
[åˆå§‹åŒ–] ä»Redisè·å–å†å²Kçº¿æ•°æ®...
[Redis] è·å– 260 ä¸ªå¸ç§çš„å†å²Kçº¿...
[Redis] å®Œæˆ: 312000 æ¡æ•°æ®, è€—æ—¶ 2.35s
[åˆå§‹åŒ–] å†å²æ•°æ®å‡†å¤‡å®Œæˆ: 312000 æ¡
[åˆå§‹åŒ–] æ³¨å†Œè´¦æˆ·...
[è´¦æˆ·] âœ“ æ³¨å†ŒæˆåŠŸ, USDTä½™é¢: 50000.00
[ç­–ç•¥] é¦–æ¬¡æ‰§è¡Œç­–ç•¥è®¡ç®—...
============================================================
[ç­–ç•¥#1] å¼€å§‹æ‰§è¡ŒGNNç­–ç•¥è®¡ç®—...
[ç­–ç•¥] ä»Redisåˆ·æ–°å†å²æ•°æ®...
[ç­–ç•¥] è®¡ç®—ç›®æ ‡ä»“ä½...
[ç­–ç•¥] è®¡ç®—å®Œæˆ, è€—æ—¶: 2.15s
[ç­–ç•¥] å¤šå¤´ä»“ä½ (13ä¸ª):
  + BTC-USDT-SWAP: 3.85%
  + ETH-USDT-SWAP: 3.85%
  ...
[ç­–ç•¥] ç©ºå¤´ä»“ä½ (13ä¸ª):
  - DOGE-USDT-SWAP: -3.85%
  - SHIB-USDT-SWAP: -3.85%
  ...
[è°ƒä»“] å¯ç”¨ä½™é¢: 50000.00 USDT
[è°ƒä»“] BTC-USDT-SWAP BUY 2å¼  (æƒé‡: 3.85%, ä»·æ ¼: 95234.50)
[è°ƒä»“] è®¢å•ID: py1234567890
[æˆäº¤] okx|BTC-USDT-SWAP buy 2å¼  @ 95234.50
...
[ç­–ç•¥] æ‰§è¡Œå®Œæˆ: 2026-01-26 10:30:00 UTC
============================================================
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Redisæ•°æ®ä¾èµ–**
   - ç¡®ä¿ `data_recorder` æ­£åœ¨è¿è¡Œå¹¶å½•åˆ¶æ•°æ®åˆ°Redis
   - æ£€æŸ¥Redisä¸­æ˜¯å¦æœ‰è¶³å¤Ÿçš„å†å²æ•°æ®ï¼ˆè‡³å°‘1200æ ¹Kçº¿ï¼‰

2. **æ¨¡å‹æ–‡ä»¶**
   - ç¡®ä¿æ¨¡å‹æ–‡ä»¶å­˜åœ¨äº `trading/model/` ç›®å½•
   - éœ€è¦3ä¸ªæ¨¡å‹æ–‡ä»¶ï¼š`diffgnn_2725.pth`, `diffgnn_3407.pth`, `diffgnn_42.pth`

3. **APIå¯†é’¥å®‰å…¨**
   - ä¸è¦å°†åŒ…å«çœŸå®APIå¯†é’¥çš„é…ç½®æ–‡ä»¶æäº¤åˆ°Git
   - å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–åŠ å¯†å­˜å‚¨

4. **é£æ§è®¾ç½®**
   - é¦–æ¬¡è¿è¡Œå»ºè®®å¯ç”¨é£æ§å¹¶è®¾ç½®è¾ƒå°çš„é™é¢
   - æµ‹è¯•æ—¶ä½¿ç”¨å°ä»“ä½ï¼ˆå¦‚500 USDTï¼‰

5. **æ‰§è¡Œé¢‘ç‡**
   - å»ºè®®æµ‹è¯•æ—¶ä½¿ç”¨è¾ƒçŸ­é—´éš”ï¼ˆå¦‚10åˆ†é’Ÿï¼‰
   - ç”Ÿäº§ç¯å¢ƒå¯ä½¿ç”¨è¾ƒé•¿é—´éš”ï¼ˆå¦‚1å°æ—¶æˆ–14å¤©ï¼‰

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šRedisè¿æ¥å¤±è´¥
```
[é”™è¯¯] Redisè¿æ¥å¤±è´¥
```
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥Redisæ˜¯å¦è¿è¡Œï¼š`redis-cli ping`
- æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„Redisåœ°å€å’Œç«¯å£

### é—®é¢˜2ï¼šæ— å†å²æ•°æ®
```
[é”™è¯¯] å†å²æ•°æ®è·å–å¤±è´¥ï¼Œè¯·ç¡®ä¿data_recorderæ­£åœ¨è¿è¡Œ
```
**è§£å†³æ–¹æ¡ˆï¼š**
- å¯åŠ¨data_recorderå½•åˆ¶æ•°æ®
- æ£€æŸ¥Redisä¸­æ˜¯å¦æœ‰Kçº¿æ•°æ®ï¼š`redis-cli KEYS "kline:*"`

### é—®é¢˜3ï¼šè´¦æˆ·æ³¨å†Œå¤±è´¥
```
[è´¦æˆ·] âœ— æ³¨å†Œå¤±è´¥: Invalid API key
```
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®è®¤is_testnetè®¾ç½®ä¸APIå¯†é’¥ç±»å‹åŒ¹é…

### é—®é¢˜4ï¼šæ¨¡å‹åŠ è½½å¤±è´¥
```
[åˆå§‹åŒ–] GNNæ¨¡å‹åŠ è½½å¤±è´¥: FileNotFoundError
```
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls trading/model/`
- ç¡®ä¿3ä¸ªæ¨¡å‹æ–‡ä»¶éƒ½å­˜åœ¨

## ğŸ“ é…ç½®æ–‡ä»¶æ¨¡æ¿

å®Œæ•´çš„é…ç½®æ–‡ä»¶æ¨¡æ¿å·²ä¿å­˜åœ¨ï¼š
`/home/xyc/Real-account-trading-framework-main/Real-account-trading-framework-main/cpp/strategies/configs/gnn_multi_coin.json`

ä½ å¯ä»¥å¤åˆ¶è¿™ä¸ªæ–‡ä»¶åˆ›å»ºæ–°çš„é…ç½®ï¼š
```bash
cp configs/gnn_multi_coin.json configs/gnn_my_strategy.json
```

ç„¶åä¿®æ”¹æ–°æ–‡ä»¶å¹¶è¿è¡Œï¼š
```bash
python3 gnn_strategy_config.py --config ../../../../configs/gnn_my_strategy.json
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„APIå¯†é’¥
2. è°ƒæ•´ä»“ä½å¤§å°å’Œé£æ§å‚æ•°
3. è¿è¡Œç­–ç•¥å¹¶è§‚å¯Ÿæ—¥å¿—è¾“å‡º
4. æ ¹æ®éœ€è¦è°ƒæ•´æ‰§è¡Œé¢‘ç‡å’Œåˆ†å±‚æ•°é‡
