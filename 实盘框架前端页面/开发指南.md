# å®ç›˜äº¤æ˜“ç®¡ç†ç³»ç»Ÿ - å¼€å‘æŒ‡å—

## ğŸ¯ ç³»ç»Ÿæ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3 (Composition API)
- **æ„å»ºå·¥å…·**: Vite 5
- **UIç»„ä»¶åº“**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **å›¾è¡¨åº“**: ECharts 5
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ ·å¼**: SCSS

### åç«¯å¯¹æ¥
å‰ç«¯é€šè¿‡RESTful APIä¸åç«¯é€šä¿¡ï¼š
- **C++å®ç›˜æ¡†æ¶**: è´Ÿè´£äº¤æ˜“æ‰§è¡Œã€è®¢å•ç®¡ç†
- **Pythonç­–ç•¥**: è´Ÿè´£ç­–ç•¥é€»è¾‘
- **åç«¯APIæœåŠ¡**: æä¾›å‰ç«¯æ‰€éœ€æ¥å£

## ğŸ“ ç›®å½•ç»“æ„è¯¦è§£

```
src/
â”œâ”€â”€ api/                    # APIæ¥å£å±‚
â”‚   â”œâ”€â”€ strategy.js         # ç­–ç•¥ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ account.js          # è´¦æˆ·ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ order.js            # è®¢å•ç›¸å…³æ¥å£
â”‚   â”œâ”€â”€ market.js           # å¸‚åœºæ•°æ®æ¥å£
â”‚   â””â”€â”€ mock.js             # Mockæ•°æ®æœåŠ¡
â”‚
â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚
â”œâ”€â”€ components/             # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ Strategy/           # ç­–ç•¥ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ RunningStrategiesTable.vue      # è¿è¡Œä¸­ç­–ç•¥è¡¨æ ¼
â”‚   â”‚   â””â”€â”€ CreateStrategyDialog.vue        # åˆ›å»ºç­–ç•¥å¯¹è¯æ¡†
â”‚   â”‚
â”‚   â”œâ”€â”€ Account/            # è´¦æˆ·ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AccountDetail.vue               # è´¦æˆ·è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ AddAccountDialog.vue            # æ·»åŠ è´¦æˆ·å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ EquityCurveDialog.vue           # å‡€å€¼æ›²çº¿å¯¹è¯æ¡†
â”‚   â”‚
â”‚   â”œâ”€â”€ Order/              # è®¢å•ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ RecentOrdersTable.vue           # æœ€è¿‘è®¢å•è¡¨æ ¼
â”‚   â”‚   â”œâ”€â”€ PlaceOrderDialog.vue            # æ‰‹åŠ¨ä¸‹å•å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ OrderDetailDialog.vue           # è®¢å•è¯¦æƒ…å¯¹è¯æ¡†
â”‚   â”‚
â”‚   â””â”€â”€ Charts/             # å›¾è¡¨ç»„ä»¶
â”‚       â”œâ”€â”€ EquityChart.vue                 # å‡€å€¼æ›²çº¿å›¾
â”‚       â”œâ”€â”€ StrategyPerformanceChart.vue    # ç­–ç•¥æ€§èƒ½å›¾
â”‚       â”œâ”€â”€ PositionDistributionChart.vue   # æŒä»“åˆ†å¸ƒå›¾
â”‚       â””â”€â”€ PnlDistributionChart.vue        # ç›ˆäºåˆ†å¸ƒå›¾
â”‚
â”œâ”€â”€ mock/                   # Mockæ•°æ®
â”‚   â””â”€â”€ index.js            # æ¨¡æ‹Ÿæ•°æ®å®šä¹‰
â”‚
â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.js            # è·¯ç”±å®šä¹‰
â”‚
â”œâ”€â”€ stores/                 # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ strategy.js         # ç­–ç•¥çŠ¶æ€
â”‚   â”œâ”€â”€ account.js          # è´¦æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ order.js            # è®¢å•çŠ¶æ€
â”‚   â””â”€â”€ app.js              # åº”ç”¨å…¨å±€çŠ¶æ€
â”‚
â”œâ”€â”€ styles/                 # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ main.scss           # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ request.js          # Axioså°è£…
â”‚   â””â”€â”€ format.js           # æ ¼å¼åŒ–å‡½æ•°
â”‚
â”œâ”€â”€ views/                  # é¡µé¢è§†å›¾
â”‚   â”œâ”€â”€ Layout.vue          # ä¸»å¸ƒå±€
â”‚   â”œâ”€â”€ Dashboard.vue       # ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ Strategy.vue        # ç­–ç•¥ç®¡ç†
â”‚   â”œâ”€â”€ Account.vue         # è´¦æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ Orders.vue          # è®¢å•ç®¡ç†
â”‚   â””â”€â”€ Positions.vue       # æŒä»“ç®¡ç†
â”‚
â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶
â””â”€â”€ main.js                 # å…¥å£æ–‡ä»¶
```

## ğŸ”„ æ•°æ®æµ

### 1. APIè°ƒç”¨æµç¨‹

```
ç»„ä»¶ â†’ Store (Pinia) â†’ APIå±‚ â†’ Mock/Backend â†’ è¿”å›æ•°æ® â†’ Store â†’ ç»„ä»¶æ›´æ–°
```

### 2. çŠ¶æ€ç®¡ç†

ä½¿ç”¨Piniaè¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œä¸»è¦Storeï¼š

#### Strategy Store
```javascript
- strategies          // ç­–ç•¥åˆ—è¡¨
- runningStrategies   // è¿è¡Œä¸­çš„ç­–ç•¥
- pendingStrategies   // å¾…å¯åŠ¨çš„ç­–ç•¥
- fetchStrategies()   // è·å–ç­–ç•¥åˆ—è¡¨
- startStrategy()     // å¯åŠ¨ç­–ç•¥
- stopStrategy()      // åœæ­¢ç­–ç•¥
```

#### Account Store
```javascript
- accounts           // è´¦æˆ·åˆ—è¡¨
- totalEquity        // æ€»èµ„äº§
- totalPnL           // æ€»ç›ˆäº
- fetchAccounts()    // è·å–è´¦æˆ·åˆ—è¡¨
- syncAccount()      // åŒæ­¥è´¦æˆ·
```

#### Order Store
```javascript
- orders             // è®¢å•åˆ—è¡¨
- positions          // æŒä»“åˆ—è¡¨
- activeOrders       // æ´»è·ƒè®¢å•
- fetchOrders()      // è·å–è®¢å•
- placeOrder()       // ä¸‹å•
- cancelOrder()      // å–æ¶ˆè®¢å•
```

## ğŸ”Œ æ¥å£å¯¹æ¥è¯´æ˜

### åç«¯æ¥å£æ ¼å¼

æ‰€æœ‰æ¥å£è¿”å›æ ¼å¼åº”éµå¾ªï¼š

```javascript
{
  "code": 200,           // çŠ¶æ€ç 
  "message": "success",  // æ¶ˆæ¯
  "data": {...}          // æ•°æ®
}
```

### ç­–ç•¥æ¥å£

#### 1. è·å–ç­–ç•¥åˆ—è¡¨
```
GET /api/strategies
Response: {
  code: 200,
  data: [
    {
      id: 1,
      name: "ç­–ç•¥åç§°",
      type: "grid",
      status: "running",
      pnl: 1250.50,
      returnRate: 12.5,
      ...
    }
  ]
}
```

#### 2. å¯åŠ¨ç­–ç•¥
```
POST /api/strategies/:id/start
Request: { config: {...} }
Response: { code: 200, data: { success: true } }
```

### è´¦æˆ·æ¥å£

#### 1. è·å–è´¦æˆ·åˆ—è¡¨
```
GET /api/accounts
Response: {
  code: 200,
  data: [
    {
      id: 1,
      name: "OKXè´¦æˆ·1",
      balance: 15000,
      equity: 16250,
      unrealizedPnl: 1250,
      ...
    }
  ]
}
```

#### 2. è·å–å‡€å€¼æ›²çº¿
```
GET /api/accounts/:id/equity-curve?timeRange=7d
Response: {
  code: 200,
  data: {
    data: [
      { timestamp: "2024-01-01", equity: 10000 },
      { timestamp: "2024-01-02", equity: 10150 },
      ...
    ],
    statistics: {
      initialEquity: 10000,
      currentEquity: 12500,
      totalReturn: 2500,
      returnRate: 25.0
    }
  }
}
```

## ğŸ¨ ç»„ä»¶å¼€å‘è§„èŒƒ

### 1. ç»„ä»¶å‘½å
- ä½¿ç”¨ PascalCase
- ç»„ä»¶æ–‡ä»¶åä¸ç»„ä»¶åä¸€è‡´
- å¤šå•è¯å‘½åï¼ˆé¿å…ä¸HTMLæ ‡ç­¾å†²çªï¼‰

### 2. ç»„ä»¶ç»“æ„
```vue
<template>
  <!-- æ¨¡æ¿ -->
</template>

<script setup>
// å¯¼å…¥
import { ref, computed } from 'vue'

// Props
const props = defineProps({...})

// Emits
const emit = defineEmits([...])

// å“åº”å¼æ•°æ®
const data = ref(...)

// è®¡ç®—å±æ€§
const computed = computed(...)

// æ–¹æ³•
function method() {...}

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {...})
</script>

<style lang="scss" scoped>
/* æ ·å¼ */
</style>
```

### 3. ä»£ç é£æ ¼
- ä½¿ç”¨ Composition API
- ä¼˜å…ˆä½¿ç”¨ `<script setup>`
- ä½¿ç”¨ TypeScript ç±»å‹æ³¨è§£ï¼ˆå¯é€‰ï¼‰
- éµå¾ª ESLint è§„åˆ™

## ğŸ”§ å¼€å‘è°ƒè¯•

### 1. Mockæ•°æ®å¼€å‘

ç¼–è¾‘ `src/mock/index.js` æ·»åŠ æ¨¡æ‹Ÿæ•°æ®ï¼š

```javascript
export const mockStrategies = [
  {
    id: 1,
    name: 'ç­–ç•¥åç§°',
    ...
  }
]
```

åœ¨ `src/api/mock.js` ä¸­ä½¿ç”¨ï¼š

```javascript
export const mockStrategyApi = {
  async getStrategies() {
    return mockApiResponse(mockStrategies)
  }
}
```

### 2. åˆ‡æ¢åˆ°çœŸå®åç«¯

åœ¨ `src/api/mock.js` ä¸­ï¼š

```javascript
const USE_MOCK = false  // æ”¹ä¸º false
```

### 3. è°ƒè¯•æŠ€å·§

- ä½¿ç”¨ Vue DevTools æŸ¥çœ‹ç»„ä»¶çŠ¶æ€
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
- åœ¨ Pinia Store ä¸­æ·»åŠ  console.log è·Ÿè¸ªçŠ¶æ€å˜åŒ–

## ğŸ“ æ·»åŠ æ–°åŠŸèƒ½

### ç¤ºä¾‹ï¼šæ·»åŠ é£æ§æ¨¡å—

#### 1. åˆ›å»ºAPIæ¥å£
```javascript
// src/api/risk.js
export function getRiskSettings() {
  return request({
    url: '/risk/settings',
    method: 'get'
  })
}
```

#### 2. åˆ›å»ºStore
```javascript
// src/stores/risk.js
export const useRiskStore = defineStore('risk', () => {
  const settings = ref({})
  
  async function fetchSettings() {
    const res = await getRiskSettings()
    settings.value = res.data
  }
  
  return { settings, fetchSettings }
})
```

#### 3. åˆ›å»ºé¡µé¢ç»„ä»¶
```vue
<!-- src/views/Risk.vue -->
<template>
  <div class="risk-page">
    <!-- é¡µé¢å†…å®¹ -->
  </div>
</template>

<script setup>
import { useRiskStore } from '@/stores/risk'

const riskStore = useRiskStore()
onMounted(() => {
  riskStore.fetchSettings()
})
</script>
```

#### 4. æ·»åŠ è·¯ç”±
```javascript
// src/router/index.js
{
  path: '/risk',
  name: 'Risk',
  component: () => import('@/views/Risk.vue'),
  meta: { title: 'é£æ§ç®¡ç†' }
}
```

## ğŸš€ æ„å»ºéƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
npm run dev
```

### ç”Ÿäº§æ„å»º
```bash
npm run build
```

### é¢„è§ˆæ„å»ºç»“æœ
```bash
npm run preview
```

## ğŸ“š å‚è€ƒèµ„æ–™

- [Vue 3 æ–‡æ¡£](https://cn.vuejs.org/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/zh-CN/)
- [Pinia æ–‡æ¡£](https://pinia.vuejs.org/zh/)
- [ECharts æ–‡æ¡£](https://echarts.apache.org/zh/)
- [Vite æ–‡æ¡£](https://cn.vitejs.dev/)

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§åˆ—è¡¨
   - å›¾è¡¨æ•°æ®é‡‡æ ·
   - ç»„ä»¶æ‡’åŠ è½½

2. **ç”¨æˆ·ä½“éªŒ**
   - åŠ è½½çŠ¶æ€æç¤º
   - é”™è¯¯å¤„ç†
   - æ“ä½œç¡®è®¤

3. **ä»£ç è´¨é‡**
   - ç»„ä»¶å¤ç”¨
   - é¿å…æ·±å±‚åµŒå¥—
   - é€‚å½“çš„æ³¨é‡Š

4. **å®‰å…¨æ€§**
   - API KeyåŠ å¯†å­˜å‚¨
   - è¾“å…¥éªŒè¯
   - XSSé˜²æŠ¤

